<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Chick It ‚Äî Egg Freshness Intelligence</title>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;0,900;1,400&family=DM+Mono:wght@300;400;500&family=Sora:wght@300;400;600&display=swap" rel="stylesheet"/>
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --yolk:    #F2A83B;
      --shell:   #F5E6C8;
      --white:   #FFFDF7;
      --brown:   #3D2B1F;
      --dark:    #1A1209;
      --cream:   #EFD9A8;
      --fresh:   #4BAF7A;
      --mid:     #E8A020;
      --old:     #C94040;
      --accent:  #6B4CFF;
      --border:  rgba(61,43,31,.15);
      --shadow:  rgba(61,43,31,.12);
    }

    html { scroll-behavior: smooth; }

    body {
      font-family: 'Sora', sans-serif;
      background: var(--white);
      color: var(--brown);
      min-height: 100vh;
      overflow-x: hidden;
    }

    /* ‚îÄ‚îÄ ANIMATED BACKGROUND ‚îÄ‚îÄ */
    .bg-canvas {
      position: fixed; inset: 0; z-index: 0; pointer-events: none;
      overflow: hidden;
    }
    .bg-blob {
      position: absolute; border-radius: 50%;
      filter: blur(80px); opacity: .18;
      animation: blobDrift 20s ease-in-out infinite alternate;
    }
    .bg-blob:nth-child(1) { width:600px;height:600px;background:var(--yolk); top:-150px; left:-100px; animation-delay:0s; }
    .bg-blob:nth-child(2) { width:400px;height:400px;background:var(--cream); top:40%;right:-120px; animation-delay:-6s; }
    .bg-blob:nth-child(3) { width:350px;height:350px;background:#e8c5a0; bottom:-80px;left:30%; animation-delay:-12s; }

    @keyframes blobDrift {
      0%   { transform: translate(0,0) scale(1); }
      50%  { transform: translate(30px,-40px) scale(1.05); }
      100% { transform: translate(-20px,20px) scale(.97); }
    }

    /* ‚îÄ‚îÄ LAYOUT ‚îÄ‚îÄ */
    .wrapper {
      position: relative; z-index: 1;
      max-width: 1040px; margin: 0 auto;
      padding: 32px 24px 80px;
    }

    /* ‚îÄ‚îÄ HEADER ‚îÄ‚îÄ */
    header {
      text-align: center;
      padding: 48px 0 32px;
    }
    .brand-badge {
      display: inline-flex; align-items: center; gap: 10px;
      background: #e8e8e8; color: #111111; border: 1.5px solid #d0d0d0;
      font-family: 'DM Mono', monospace; font-size: .72rem; letter-spacing: .18em;
      padding: 6px 18px; border-radius: 999px;
      margin-bottom: 24px; text-transform: uppercase;
      box-shadow: 0 4px 20px rgba(0,0,0,.18);
    }
    .brand-badge .dot { width:7px;height:7px;background:var(--yolk);border-radius:50%;animation:pulse 1.8s ease-in-out infinite; }
    @keyframes pulse { 0%,100%{transform:scale(1);opacity:1} 50%{transform:scale(1.4);opacity:.6} }

    h1 {
      font-family: 'Playfair Display', serif;
      font-size: clamp(3rem, 7vw, 5.6rem);
      font-weight: 900; line-height: 1;
      color: var(--dark);
      letter-spacing: .12em;
      text-transform: uppercase;
    }
    h1 em { font-style: italic; color: var(--yolk); }
    .subheading {
      margin-top: 6px;
      font-size: .95rem;
      color: rgba(61,43,31,.55);
      font-weight: 400;
      letter-spacing: .02em;
      max-width: 520px;
      margin-inline: auto;
      line-height: 1.65;
    }
    .tagline {
      margin-top: 16px; font-size: 1rem; color: rgba(61,43,31,.6);
      font-weight: 300; letter-spacing: .02em; max-width: 440px; margin-inline: auto;
    }

    /* ‚îÄ‚îÄ TOP LAYOUT: About + Hero ‚îÄ‚îÄ */
    .top-layout {
      display: grid;
      grid-template-columns: 1fr 320px;
      gap: 32px;
      align-items: start;
      margin-bottom: 48px;
    }
    @media (max-width: 860px) {
      .top-layout { grid-template-columns: 1fr; }
      .hero-right  { order: -1; }
    }

    /* ‚îÄ‚îÄ ABOUT PANEL ‚îÄ‚îÄ */
    .about-panel {
      background: rgba(255,253,247,.9);
      border: 1.5px solid var(--border);
      border-radius: 24px;
      padding: 30px 28px;
      box-shadow: 0 8px 40px var(--shadow);
    }
    .about-label {
      display: inline-flex; align-items: center; gap: 8px;
      font-family: 'DM Mono', monospace; font-size: .68rem;
      letter-spacing: .18em; text-transform: uppercase;
      color: var(--yolk); font-weight: 500;
      margin-bottom: 12px;
    }
    .about-label::before {
      content: ''; display: block;
      width: 18px; height: 2px; background: var(--yolk); border-radius: 2px;
    }
    .about-title {
      font-family: 'Playfair Display', serif;
      font-size: 1.2rem; font-weight: 700;
      color: var(--dark); margin-bottom: 12px;
      line-height: 1.35;
    }
    .about-text {
      font-size: .81rem; line-height: 1.75;
      color: rgba(61,43,31,.62);
      margin-bottom: 20px;
    }
    .about-accuracy {
      display: flex; align-items: center; gap: 14px;
      background: rgba(242,168,59,.08);
      border: 1px solid rgba(242,168,59,.25);
      border-radius: 12px; padding: 14px 16px;
      margin-bottom: 20px;
    }
    .accuracy-num {
      font-family: 'Playfair Display', serif;
      font-size: 2rem; font-weight: 900; color: var(--yolk);
      line-height: 1; flex-shrink: 0;
    }
    .accuracy-desc {
      font-size: .78rem; color: rgba(61,43,31,.55); line-height: 1.5;
    }
    .accuracy-desc strong { color: var(--brown); display: block; font-size: .83rem; margin-bottom: 2px; }
    .members-title {
      font-family: 'DM Mono', monospace; font-size: .67rem;
      letter-spacing: .14em; text-transform: uppercase;
      color: rgba(61,43,31,.35); margin-bottom: 10px;
    }
    .member-list { display: flex; flex-direction: column; gap: 8px; }
    .member { display: flex; align-items: center; gap: 10px; }
    .member-avatar {
      width: 32px; height: 32px; border-radius: 50%;
      background: var(--cream);
      display: flex; align-items: center; justify-content: center;
      font-size: .74rem; font-weight: 700; color: var(--brown);
      flex-shrink: 0; border: 1.5px solid var(--border);
    }
    .member-info { flex: 1; }
    .member-name { font-size: .81rem; font-weight: 600; color: var(--dark); }
    .member-role { font-size: .71rem; color: rgba(61,43,31,.4); font-family: 'DM Mono', monospace; }

    /* ‚îÄ‚îÄ RIGHT SIDE ‚îÄ‚îÄ */
    .hero-right {
      display: flex; flex-direction: column; align-items: center; gap: 20px;
      padding-top: 8px;
    }
    .hero-right .brand-badge { margin-bottom: 0; }
    .hero-right h1 { text-align: center; }
    .hero-right .subheading { text-align: center; }

    /* ‚îÄ‚îÄ EGG ICON HERO ‚îÄ‚îÄ */
    .egg-hero {
      display: flex; justify-content: center;
      margin: 0 0 48px;
    }
    /* ‚îÄ‚îÄ EGG WRAP ‚îÄ‚îÄ */
    .egg-svg-wrap {
      position: relative; cursor: pointer;
      user-select: none; -webkit-user-select: none;
      width: 130px; height: 180px;
    }

    /* base egg always visible */
    .egg-base { position: absolute; inset: 0; pointer-events: none; transition: opacity .3s; }

    /* hover yolk glow */
    .egg-crack-overlay { position: absolute; inset: 0; opacity: 0; transition: opacity .25s; pointer-events: none; }
    .egg-svg-wrap:hover .egg-crack-overlay.hover-yolk { opacity: 1; }

    /* ‚îÄ‚îÄ CRACK LAYERS (all hidden by default) ‚îÄ‚îÄ */
    .crack-layer { position: absolute; inset: 0; opacity: 0; transition: opacity .22s ease; pointer-events: none; }

    /* show stages */
    .egg-svg-wrap.crack-1 .crack-layer-1 { opacity: 1; }
    .egg-svg-wrap.crack-2 .crack-layer-1 { opacity: 0; }
    .egg-svg-wrap.crack-2 .crack-layer-2 { opacity: 1; }
    .egg-svg-wrap.crack-3 .crack-layer-2 { opacity: 0; }
    .egg-svg-wrap.crack-3 .crack-layer-3 { opacity: 1; }
    .egg-svg-wrap.crack-4 .crack-layer-3 { opacity: 0; }
    .egg-svg-wrap.crack-4 .crack-layer-4 { opacity: 1; }
    /* hide base egg on final break */
    .egg-svg-wrap.crack-4 .egg-base      { opacity: 0; }

    /* ‚îÄ‚îÄ TOP HALF LIFTS on stage 4 ‚îÄ‚îÄ */
    .egg-top-half {
      position: absolute; inset: 0; pointer-events: none;
      transition: transform .55s cubic-bezier(.34,1.2,.64,1), opacity .4s;
      opacity: 0;
      transform: translateY(0) rotate(0deg);
    }
    .egg-svg-wrap.crack-4 .egg-top-half {
      opacity: 1;
      transform: translateY(-38px) rotate(-14deg);
    }

    /* ‚îÄ‚îÄ BOTTOM HALF stays on stage 4 ‚îÄ‚îÄ */
    .egg-bottom-half {
      position: absolute; inset: 0; pointer-events: none;
      opacity: 0; transition: opacity .3s .1s;
    }
    .egg-svg-wrap.crack-4 .egg-bottom-half { opacity: 1; }

    /* yolk sits in bottom on stage 4 */
    .yolk-in-bowl {
      position: absolute; inset: 0; pointer-events: none;
      opacity: 0;
      transition: opacity .3s .25s, transform .45s .25s cubic-bezier(.34,1.4,.64,1);
      transform: translateY(-10px);
    }
    .egg-svg-wrap.crack-4 .yolk-in-bowl {
      opacity: 1;
      transform: translateY(0);
    }

    /* ‚îÄ‚îÄ ANIMATIONS ‚îÄ‚îÄ */
    @keyframes eggShake {
      0%,100% { transform: rotate(0deg); }
      20%  { transform: rotate(-7deg) scale(1.05); }
      40%  { transform: rotate(7deg) scale(1.05); }
      60%  { transform: rotate(-4deg); }
      80%  { transform: rotate(3deg); }
    }
    @keyframes eggJolt {
      0%   { transform: scale(1); }
      25%  { transform: scale(1.1) rotate(-4deg); }
      55%  { transform: scale(1.08) rotate(3deg); }
      100% { transform: scale(1) rotate(0deg); }
    }
    .egg-svg-wrap.shaking  { animation: eggShake .38s ease-in-out; }
    .egg-svg-wrap.jolting  { animation: eggJolt  .32s ease-out; }

    /* hint label */
    .egg-hint {
      font-family: 'DM Mono', monospace; font-size: .68rem;
      color: rgba(61,43,31,.38); letter-spacing: .08em;
      margin-top: 10px; text-align: center;
      height: 16px; transition: color .3s;
    }

    /* ‚îÄ‚îÄ CARDS GRID ‚îÄ‚îÄ */
    .cards-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 28px;
      margin-bottom: 36px;
    }
    @media (max-width: 640px) { .cards-grid { grid-template-columns: 1fr; } }

    .card {
      background: rgba(255,253,247,.85);
      backdrop-filter: blur(20px);
      border: 1.5px solid var(--border);
      border-radius: 24px;
      padding: 36px 32px;
      box-shadow: 0 8px 40px var(--shadow);
      transition: transform .3s, box-shadow .3s;
    }
    .card:hover { transform: translateY(-4px); box-shadow: 0 16px 56px rgba(61,43,31,.15); }

    .card-header {
      display: flex; align-items: center; gap: 14px;
      margin-bottom: 28px;
    }
    .card-icon {
      width: 48px; height: 48px; border-radius: 14px;
      display: flex; align-items: center; justify-content: center;
      font-size: 1.5rem;
      flex-shrink: 0;
    }
    .card-icon.fi   { background: linear-gradient(135deg,#F2A83B,#e8871a); }
    .card-icon.haugh{ background: linear-gradient(135deg,#6B4CFF,#9b7aff); }

    .card-title {
      font-family: 'Playfair Display', serif;
      font-size: 1.35rem; font-weight: 700;
      color: var(--dark);
    }
    .card-subtitle {
      font-size: .78rem; color: rgba(61,43,31,.5);
      font-family: 'DM Mono', monospace; letter-spacing: .06em;
      margin-top: 2px;
    }

    /* ‚îÄ‚îÄ FORMULA DISPLAY ‚îÄ‚îÄ */
    .formula-chip {
      background: #e8e8e8; color: #111111; border: 1.5px solid #d0d0d0;
      font-family: 'DM Mono', monospace; font-size: .88rem;
      padding: 10px 18px; border-radius: 10px;
      margin-bottom: 26px; display: inline-block;
      letter-spacing: .04em;
    }
    .formula-chip span { color: #555555; font-weight: 500; }

    /* ‚îÄ‚îÄ INPUTS ‚îÄ‚îÄ */
    .input-group {
      margin-bottom: 18px;
    }
    .input-label {
      display: flex; align-items: baseline; justify-content: space-between;
      margin-bottom: 8px;
    }
    .input-label .name {
      font-size: .82rem; font-weight: 600;
      color: var(--brown); letter-spacing: .03em;
    }
    .input-label .unit {
      font-size: .74rem; color: rgba(61,43,31,.45);
      font-family: 'DM Mono', monospace;
    }

    .slider-wrap {
      position: relative;
    }
    input[type="range"] {
      -webkit-appearance: none; appearance: none;
      width: 100%; height: 6px;
      border-radius: 999px;
      outline: none; cursor: pointer;
      background: var(--cream);
      transition: background .2s;
    }
    input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none; appearance: none;
      width: 22px; height: 22px;
      border-radius: 50%;
      background: var(--yolk);
      border: 3px solid white;
      box-shadow: 0 3px 12px rgba(242,168,59,.5);
      cursor: grab; transition: transform .2s, box-shadow .2s;
    }
    input[type="range"]::-webkit-slider-thumb:active { cursor: grabbing; transform: scale(1.2); box-shadow: 0 4px 20px rgba(242,168,59,.7); }

    input[type="range"].haugh-slider::-webkit-slider-thumb {
      background: var(--accent);
      box-shadow: 0 3px 12px rgba(107,76,255,.5);
    }
    input[type="range"].haugh-slider::-webkit-slider-thumb:active { box-shadow: 0 4px 20px rgba(107,76,255,.7); }

    .slider-row {
      display: flex; align-items: center; gap: 12px;
    }
    .slider-row input[type="range"] { flex: 1; }
    .number-input {
      width: 72px; padding: 7px 10px;
      border: 1.5px solid var(--border);
      border-radius: 10px;
      background: var(--white);
      font-family: 'DM Mono', monospace; font-size: .9rem;
      color: var(--dark); text-align: center;
      outline: none; transition: border-color .2s, box-shadow .2s;
      -moz-appearance: textfield;
    }
    .number-input::-webkit-inner-spin-button,
    .number-input::-webkit-outer-spin-button { -webkit-appearance: none; }
    .number-input:focus { border-color: var(--yolk); box-shadow: 0 0 0 3px rgba(242,168,59,.18); }
    .number-input.haugh-field:focus { border-color: var(--accent); box-shadow: 0 0 0 3px rgba(107,76,255,.18); }

    /* ‚îÄ‚îÄ RESULT BOX ‚îÄ‚îÄ */
    .result-box {
      margin-top: 28px;
      border-radius: 16px;
      padding: 22px 24px;
      transition: background .5s, border-color .5s;
      border: 2px solid transparent;
      position: relative;
      overflow: hidden;
    }
    .result-box::before {
      content: '';
      position: absolute; inset: 0;
      opacity: .07;
      border-radius: inherit;
    }
    .result-box.fresh   { background: rgba(75,175,122,.1); border-color: rgba(75,175,122,.35); }
    .result-box.fresh::before   { background: var(--fresh); }
    .result-box.mid     { background: rgba(232,160,32,.1); border-color: rgba(232,160,32,.35); }
    .result-box.mid::before     { background: var(--mid); }
    .result-box.old     { background: rgba(201,64,64,.1); border-color: rgba(201,64,64,.35); }
    .result-box.old::before     { background: var(--old); }

    .result-label {
      font-family: 'DM Mono', monospace; font-size: .72rem;
      letter-spacing: .14em; text-transform: uppercase;
      color: rgba(61,43,31,.45); margin-bottom: 6px;
    }
    .result-value {
      font-family: 'Playfair Display', serif;
      font-size: 2.6rem; font-weight: 900;
      line-height: 1; transition: color .4s;
    }
    .result-box.fresh  .result-value { color: #2e8a56; }
    .result-box.mid    .result-value { color: #b07010; }
    .result-box.old    .result-value { color: #a02020; }

    .result-grade {
      display: inline-flex; align-items: center; gap: 7px;
      margin-top: 10px; font-size: .88rem; font-weight: 600;
    }
    .grade-dot { width: 9px;height: 9px; border-radius: 50%; }
    .fresh  .grade-dot { background: var(--fresh); }
    .mid    .grade-dot { background: var(--mid); }
    .old    .grade-dot { background: var(--old); }

    .result-note {
      margin-top: 8px; font-size: .8rem;
      color: rgba(61,43,31,.55); line-height: 1.5;
    }

    /* ‚îÄ‚îÄ COMPARISON PANEL ‚îÄ‚îÄ */
    .compare-panel {
      background: var(--dark);
      border-radius: 24px;
      padding: 40px 40px 36px;
      color: var(--shell);
      margin-top: 8px;
      position: relative; overflow: hidden;
    }
    .compare-panel::after {
      content: '';
      position: absolute;
      top: -80px; right: -80px;
      width: 280px; height: 280px;
      background: var(--yolk); opacity: .06; border-radius: 50%;
    }

    .compare-title {
      font-family: 'Playfair Display', serif;
      font-size: 1.5rem; font-weight: 700;
      color: var(--yolk); margin-bottom: 6px;
    }
    .compare-sub {
      font-size: .82rem; color: rgba(245,230,200,.45);
      font-family: 'DM Mono', monospace; letter-spacing: .04em; margin-bottom: 32px;
    }

    .compare-grid {
      display: grid;
      grid-template-columns: 1fr auto 1fr;
      gap: 20px; align-items: center;
    }
    @media (max-width: 640px) {
      .compare-grid { grid-template-columns: 1fr; }
      .compare-vs   { text-align: center; }
    }

    .compare-col { text-align: center; }
    .compare-col .clabel {
      font-family: 'DM Mono', monospace; font-size: .7rem;
      letter-spacing: .14em; text-transform: uppercase;
      color: rgba(245,230,200,.4); margin-bottom: 10px;
    }
    .compare-col .cval {
      font-family: 'Playfair Display', serif;
      font-size: 2.8rem; font-weight: 900;
      transition: color .4s;
    }
    .compare-col .cgrade {
      font-size: .82rem; font-weight: 600; margin-top: 6px;
      padding: 4px 14px; border-radius: 999px; display: inline-block;
    }
    .grade-fresh { background: rgba(75,175,122,.2); color: #5dd490; }
    .grade-mid   { background: rgba(232,160,32,.2); color: #f0c050; }
    .grade-old   { background: rgba(201,64,64,.2);  color: #f07070; }
    .grade-na    { background: rgba(255,255,255,.08); color: rgba(245,230,200,.4); }

    .compare-vs {
      font-family: 'Playfair Display', serif; font-style: italic;
      font-size: 1.2rem; color: rgba(245,230,200,.3);
    }

    .match-banner {
      margin-top: 28px; text-align: center;
      padding: 16px; border-radius: 14px;
      font-weight: 600; font-size: .9rem;
      transition: background .4s, color .4s;
    }
    .match-banner.agree    { background: rgba(75,175,122,.15); color: #5dd490; }
    .match-banner.disagree { background: rgba(201,64,64,.15);  color: #f07070; }
    .match-banner.pending  { background: rgba(255,255,255,.05); color: rgba(245,230,200,.3); }

    .delta-bar-wrap {
      margin-top: 22px;
    }
    .delta-label {
      display: flex; justify-content: space-between;
      font-family: 'DM Mono', monospace; font-size: .72rem;
      color: rgba(245,230,200,.35); margin-bottom: 8px;
    }
    .delta-track {
      width: 100%; height: 8px; background: rgba(255,255,255,.08); border-radius: 999px; overflow: hidden;
    }
    .delta-fill {
      height: 100%; border-radius: 999px;
      background: linear-gradient(90deg, var(--yolk), #6B4CFF);
      transition: width .7s cubic-bezier(.34,1,.64,1);
    }

    /* ‚îÄ‚îÄ INFO CARDS ‚îÄ‚îÄ */
    .info-strip {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 16px; margin-top: 28px;
    }
    @media (max-width: 640px) { .info-strip { grid-template-columns: 1fr 1fr; } }

    .info-tile {
      background: rgba(255,253,247,.7);
      border: 1.5px solid var(--border);
      border-radius: 16px; padding: 20px;
    }
    .info-tile .it-icon { font-size: 1.6rem; margin-bottom: 10px; }
    .info-tile .it-val  { font-family:'Playfair Display',serif; font-size:1.5rem; font-weight:700; color:var(--dark); }
    .info-tile .it-name { font-size:.76rem; color:rgba(61,43,31,.45); margin-top:4px; letter-spacing:.03em; }

    /* ‚îÄ‚îÄ FOOTER ‚îÄ‚îÄ */
    footer {
      text-align: center; margin-top: 64px;
      font-size: .78rem; color: rgba(61,43,31,.35);
      font-family: 'DM Mono', monospace; letter-spacing: .04em;
    }
    footer a { color: var(--yolk); text-decoration: none; }

    /* ‚îÄ‚îÄ TOOLTIP ‚îÄ‚îÄ */
    [data-tip] { position: relative; cursor: help; }
    [data-tip]::after {
      content: attr(data-tip);
      position: absolute; bottom: 130%; left: 50%; transform: translateX(-50%);
      background: var(--dark); color: var(--shell);
      font-size: .72rem; font-family: 'DM Mono', monospace;
      padding: 7px 12px; border-radius: 8px; white-space: nowrap;
      opacity: 0; pointer-events: none; transition: opacity .2s;
      z-index: 10;
    }
    [data-tip]:hover::after { opacity: 1; }

    /* ‚îÄ‚îÄ ANIMATE IN ‚îÄ‚îÄ */
    @keyframes fadeUp { from{opacity:0;transform:translateY(24px)} to{opacity:1;transform:none} }
    .anim { opacity: 0; animation: fadeUp .6s forwards; }
    .anim:nth-child(1) { animation-delay: .1s; }
    .anim:nth-child(2) { animation-delay: .22s; }
    .anim:nth-child(3) { animation-delay: .34s; }
    .anim:nth-child(4) { animation-delay: .46s; }

    /* ‚îÄ‚îÄ SHIMMER PROGRESS ‚îÄ‚îÄ */
    .freshness-bar {
      margin-top: 14px; height: 10px;
      background: rgba(61,43,31,.07); border-radius: 999px; overflow: hidden;
    }
    .freshness-fill {
      height: 100%; border-radius: 999px;
      transition: width .7s cubic-bezier(.34,1,.64,1), background .4s;
      position: relative;
    }
    .freshness-fill::after {
      content: '';
      position: absolute; inset: 0;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,.35), transparent);
      animation: shimmer 1.8s ease-in-out infinite;
      background-size: 200% 100%;
    }
    @keyframes shimmer { 0%{background-position:-200% 0} 100%{background-position:200% 0} }




  </style>
</head>
<body>

<!-- Animated background -->
<div class="bg-canvas">
  <div class="bg-blob"></div>
  <div class="bg-blob"></div>
  <div class="bg-blob"></div>
</div>

<div class="wrapper">

  <!-- Top Layout: About Left + Hero Right -->
  <div class="top-layout anim">

    <!-- LEFT: About Panel -->
    <div class="about-panel">
      <div class="about-label">About This Study</div>
      <div class="about-title">A Mathematical Model for Non-Destructive Egg Freshness Classification</div>
      <div class="about-text">
        Egg freshness is a critical factor in food quality and safety, yet traditional methods often involve destructive testing. This study introduces a mathematical-based model using readily measurable physical attributes ‚Äî weight, salt floatation, and candling ‚Äî to classify egg freshness without breaking the egg.
        <br><br>
        Linear regression on 50 chicken eggs revealed that floatation and candling scores showed strong negative correlations with Haugh Unit (r&nbsp;=&nbsp;‚Äì0.73 and r&nbsp;=&nbsp;‚Äì0.58), while weight had minimal influence (r&nbsp;‚âà&nbsp;‚Äì0.11). These findings were integrated into a composite <strong>Freshness Index formula</strong>: <em>FI = W ‚Äì 12.03F ‚Äì 8.42C</em>.
      </div>
      <div class="about-accuracy">
        <div class="accuracy-num">72%</div>
        <div class="accuracy-desc">
          <strong>Classification Accuracy</strong>
          Matched against USDA grading categories using Haugh Unit as standard reference
        </div>
      </div>
      <div class="members-title">Research Team</div>
      <div class="member-list">
        <div class="member">
          <div class="member-avatar">IE</div>
          <div class="member-info">
            <div class="member-name">Ian H. Escalderon</div>
            <div class="member-role">Lead Researcher / Web Developer</div>
          </div>
        </div>
        <div class="member">
          <div class="member-avatar">PP</div>
          <div class="member-info">
            <div class="member-name">Prince Ezekiel G. Panlaque</div>
            <div class="member-role">Researcher / Analyst</div>
          </div>
        </div>
        <div class="member">
          <div class="member-avatar">LT</div>
          <div class="member-info">
            <div class="member-name">Louie Rafaell E. Trinchera</div>
            <div class="member-role">Researcher / Analyst</div>
          </div>
        </div>
      </div>
    </div>

    <!-- RIGHT: Title + Egg Hero -->
    <div class="hero-right">
      <div class="brand-badge"><span class="dot"></span> Egg Freshness Intelligence</div>
      <h1><em>CHICK IT</em></h1>
      <p class="subheading">A non-destructive, science-backed calculator that classifies egg freshness using the <strong>Freshness Index</strong> &amp; <strong>Haugh Unit</strong> methods</p>
      <div class="egg-svg-wrap" id="eggWrap" title="Double-click to crack!">

        <!-- ‚îÄ‚îÄ BASE EGG (whole) ‚îÄ‚îÄ -->
        <div class="egg-base">
          <svg width="130" height="180" viewBox="0 0 110 155" fill="none" xmlns="http://www.w3.org/2000/svg">
            <ellipse cx="55" cy="82" rx="48" ry="55" fill="url(#eggGrad0)"/>
            <ellipse cx="55" cy="82" rx="48" ry="55" fill="url(#eggSheen0)" opacity=".5"/>
            <ellipse cx="40" cy="60" rx="10" ry="14" fill="white" opacity=".18" transform="rotate(-20 40 60)"/>
            <defs>
              <radialGradient id="eggGrad0" cx="40%" cy="35%" r="65%">
                <stop offset="0%" stop-color="#FFF9EF"/>
                <stop offset="70%" stop-color="#F5E6C8"/>
                <stop offset="100%" stop-color="#DFC090"/>
              </radialGradient>
              <radialGradient id="eggSheen0" cx="30%" cy="20%" r="50%">
                <stop offset="0%" stop-color="white" stop-opacity=".6"/>
                <stop offset="100%" stop-color="white" stop-opacity="0"/>
              </radialGradient>
            </defs>
          </svg>
        </div>

        <!-- ‚îÄ‚îÄ HOVER glow ‚îÄ‚îÄ -->
        <div class="egg-crack-overlay hover-yolk">
          <svg width="130" height="180" viewBox="0 0 110 155" fill="none" style="position:absolute;inset:0">
            <ellipse cx="55" cy="90" rx="16" ry="14" fill="#F2A83B" opacity=".18"/>
          </svg>
        </div>

        <!-- ‚îÄ‚îÄ CRACK LAYER 1: thin horizontal hairline ‚îÄ‚îÄ -->
        <div class="crack-layer crack-layer-1">
          <svg width="130" height="180" viewBox="0 0 110 155" fill="none" style="position:absolute;inset:0">
            <ellipse cx="55" cy="82" rx="48" ry="55" fill="url(#eggGrad1)"/>
            <ellipse cx="40" cy="60" rx="10" ry="14" fill="white" opacity=".18" transform="rotate(-20 40 60)"/>
            <!-- thin horizontal hairline crack across middle -->
            <path d="M18 84 L28 82 L36 85 L46 81 L55 84 L65 80 L74 83 L84 80 L92 83" stroke="#9B7020" stroke-width="1" stroke-linecap="round" fill="none" opacity=".7"/>
            <!-- a few small branching hairlines -->
            <path d="M46 81 L44 76" stroke="#9B7020" stroke-width=".7" stroke-linecap="round" fill="none" opacity=".5"/>
            <path d="M65 80 L67 75" stroke="#9B7020" stroke-width=".6" stroke-linecap="round" fill="none" opacity=".45"/>
            <defs>
              <radialGradient id="eggGrad1" cx="40%" cy="35%" r="65%">
                <stop offset="0%" stop-color="#FFF9EF"/>
                <stop offset="70%" stop-color="#F5E6C8"/>
                <stop offset="100%" stop-color="#DFC090"/>
              </radialGradient>
            </defs>
          </svg>
        </div>

        <!-- ‚îÄ‚îÄ CRACK LAYER 2: wider horizontal crack, gap opens ‚îÄ‚îÄ -->
        <div class="crack-layer crack-layer-2">
          <svg width="130" height="180" viewBox="0 0 110 155" fill="none" style="position:absolute;inset:0">
            <ellipse cx="55" cy="82" rx="48" ry="55" fill="url(#eggGrad2)"/>
            <ellipse cx="40" cy="60" rx="10" ry="14" fill="white" opacity=".18" transform="rotate(-20 40 60)"/>
            <!-- darker, thicker horizontal crack -->
            <path d="M16 84 L27 81 L37 85 L47 80 L55 84 L64 79 L75 83 L85 79 L94 83" stroke="#6B4A0A" stroke-width="2" stroke-linecap="round" fill="none"/>
            <!-- wider gap shadow between halves -->
            <path d="M16 85 L27 82 L37 86 L47 81 L55 85 L64 80 L75 84 L85 80 L94 84" stroke="rgba(0,0,0,.15)" stroke-width="3.5" stroke-linecap="round" fill="none"/>
            <!-- branching cracks -->
            <path d="M37 85 L34 77" stroke="#6B4A0A" stroke-width="1.2" stroke-linecap="round" fill="none" opacity=".6"/>
            <path d="M64 79 L67 72" stroke="#6B4A0A" stroke-width="1" stroke-linecap="round" fill="none" opacity=".55"/>
            <path d="M47 80 L44 73 L48 68" stroke="#6B4A0A" stroke-width=".9" stroke-linecap="round" fill="none" opacity=".5"/>
            <defs>
              <radialGradient id="eggGrad2" cx="40%" cy="35%" r="65%">
                <stop offset="0%" stop-color="#FFF9EF"/>
                <stop offset="70%" stop-color="#F5E6C8"/>
                <stop offset="100%" stop-color="#DFC090"/>
              </radialGradient>
            </defs>
          </svg>
        </div>

        <!-- ‚îÄ‚îÄ CRACK LAYER 3: crack fully through, gap dark, yolk visible ‚îÄ‚îÄ -->
        <div class="crack-layer crack-layer-3">
          <svg width="130" height="180" viewBox="0 0 110 155" fill="none" style="position:absolute;inset:0">
            <!-- bottom half of shell -->
            <ellipse cx="55" cy="82" rx="48" ry="55" fill="url(#eggGrad3)"/>
            <!-- dark gap / inner shadow along crack line -->
            <path d="M15 83 L27 80 L38 84 L48 79 L55 83 L65 78 L76 82 L86 78 L95 82" stroke="#3A2200" stroke-width="4.5" stroke-linecap="round" fill="none" opacity=".55"/>
            <path d="M15 83 L27 80 L38 84 L48 79 L55 83 L65 78 L76 82 L86 78 L95 82" stroke="#5A3A08" stroke-width="2.5" stroke-linecap="round" fill="none"/>
            <!-- branching cracks -->
            <path d="M38 84 L34 75 L38 69" stroke="#5A3A08" stroke-width="1.4" stroke-linecap="round" fill="none" opacity=".7"/>
            <path d="M65 78 L69 70 L65 64" stroke="#5A3A08" stroke-width="1.2" stroke-linecap="round" fill="none" opacity=".65"/>
            <path d="M48 79 L44 71 L49 65" stroke="#5A3A08" stroke-width="1" stroke-linecap="round" fill="none" opacity=".6"/>
            <path d="M76 82 L80 74" stroke="#5A3A08" stroke-width=".9" stroke-linecap="round" fill="none" opacity=".5"/>
            <!-- albumen (egg white) leaking out slightly -->
            <path d="M42 84 Q40 90 44 93" stroke="rgba(255,255,255,.6)" stroke-width="3" stroke-linecap="round" fill="none"/>
            <path d="M68 83 Q72 89 70 93" stroke="rgba(255,255,255,.5)" stroke-width="2.5" stroke-linecap="round" fill="none"/>
            <defs>
              <radialGradient id="eggGrad3" cx="40%" cy="35%" r="65%">
                <stop offset="0%" stop-color="#FFF9EF"/>
                <stop offset="70%" stop-color="#F5E6C8"/>
                <stop offset="100%" stop-color="#DFC090"/>
              </radialGradient>
            </defs>
          </svg>
        </div>

        <!-- ‚îÄ‚îÄ STAGE 4: SPLIT OPEN ‚Äî bottom bowl half ‚îÄ‚îÄ -->
        <div class="egg-bottom-half">
          <svg width="130" height="180" viewBox="0 0 110 155" fill="none" style="position:absolute;inset:0">
            <!-- bottom shell bowl: lower half of egg clipped below crack line -->
            <clipPath id="bottomClip">
              <rect x="0" y="82" width="110" height="73"/>
            </clipPath>
            <ellipse cx="55" cy="82" rx="48" ry="55" fill="url(#eggGradB)" clip-path="url(#bottomClip)"/>
            <!-- inner bowl rim highlight -->
            <path d="M15 83 L27 80 L38 84 L48 79 L55 83 L65 78 L76 82 L86 78 L95 82" stroke="#3A2200" stroke-width="4" stroke-linecap="round" fill="none" opacity=".45"/>
            <path d="M15 83 L27 80 L38 84 L48 79 L55 83 L65 78 L76 82 L86 78 L95 82" stroke="#C8A060" stroke-width="1.5" stroke-linecap="round" fill="none" opacity=".8"/>
            <!-- inner shadow of bowl -->
            <ellipse cx="55" cy="95" rx="35" ry="10" fill="rgba(0,0,0,.08)" clip-path="url(#bottomClip)"/>
            <!-- egg white pool -->
            <ellipse cx="55" cy="107" rx="30" ry="16" fill="rgba(255,255,255,.75)" clip-path="url(#bottomClip)"/>
            <ellipse cx="55" cy="107" rx="30" ry="16" fill="rgba(255,255,255,.4)" clip-path="url(#bottomClip)"/>
            <defs>
              <radialGradient id="eggGradB" cx="40%" cy="60%" r="65%">
                <stop offset="0%" stop-color="#EED5A0"/>
                <stop offset="100%" stop-color="#C8A060"/>
              </radialGradient>
            </defs>
          </svg>
        </div>

        <!-- ‚îÄ‚îÄ STAGE 4: YOLK sitting in bowl ‚îÄ‚îÄ -->
        <div class="yolk-in-bowl">
          <svg width="130" height="180" viewBox="0 0 110 155" fill="none" style="position:absolute;inset:0">
            <clipPath id="bowlClip2">
              <rect x="0" y="84" width="110" height="71"/>
            </clipPath>
            <!-- yolk sphere -->
            <ellipse cx="55" cy="104" rx="18" ry="17" fill="url(#yolkFinal)" clip-path="url(#bowlClip2)"/>
            <!-- yolk highlight -->
            <ellipse cx="49" cy="98" rx="5" ry="4" fill="white" opacity=".3" transform="rotate(-20 49 98)" clip-path="url(#bowlClip2)"/>
            <defs>
              <radialGradient id="yolkFinal" cx="38%" cy="32%" r="62%">
                <stop offset="0%" stop-color="#FFE878"/>
                <stop offset="55%" stop-color="#F2A83B"/>
                <stop offset="100%" stop-color="#C07010"/>
              </radialGradient>
            </defs>
          </svg>
        </div>

        <!-- ‚îÄ‚îÄ STAGE 4: TOP HALF lifts up and tilts ‚îÄ‚îÄ -->
        <div class="egg-top-half">
          <svg width="130" height="180" viewBox="0 0 110 155" fill="none" style="position:absolute;inset:0">
            <clipPath id="topClip">
              <rect x="0" y="0" width="110" height="82"/>
            </clipPath>
            <ellipse cx="55" cy="82" rx="48" ry="55" fill="url(#eggGradT)" clip-path="url(#topClip)"/>
            <ellipse cx="55" cy="82" rx="48" ry="55" fill="url(#eggSheenT)" opacity=".45" clip-path="url(#topClip)"/>
            <ellipse cx="40" cy="60" rx="10" ry="14" fill="white" opacity=".2" transform="rotate(-20 40 60)" clip-path="url(#topClip)"/>
            <!-- jagged bottom edge of top half -->
            <path d="M15 83 L27 80 L38 84 L48 79 L55 83 L65 78 L76 82 L86 78 L95 82" stroke="#3A2200" stroke-width="3.5" stroke-linecap="round" fill="none" opacity=".4"/>
            <path d="M15 83 L27 80 L38 84 L48 79 L55 83 L65 78 L76 82 L86 78 L95 82" stroke="#C8A060" stroke-width="1.2" stroke-linecap="round" fill="none"/>
            <defs>
              <radialGradient id="eggGradT" cx="40%" cy="30%" r="65%">
                <stop offset="0%" stop-color="#FFF9EF"/>
                <stop offset="70%" stop-color="#F5E6C8"/>
                <stop offset="100%" stop-color="#DFC090"/>
              </radialGradient>
              <radialGradient id="eggSheenT" cx="30%" cy="15%" r="50%">
                <stop offset="0%" stop-color="white" stop-opacity=".65"/>
                <stop offset="100%" stop-color="white" stop-opacity="0"/>
              </radialGradient>
            </defs>
          </svg>
        </div>

      </div>
      <div class="egg-hint" id="eggHint">double-click to crack ü•ö</div>
    </div>

  </div>

  <!-- Main Calculators Grid -->
  <div class="cards-grid">

    <!-- FI Card -->
    <div class="card anim" id="fi-card">
      <div class="card-header">
        <div class="card-icon fi">ü•ö</div>
        <div>
          <div class="card-title">Freshness Index</div>
          <div class="card-subtitle">FI = W ‚àí 12.03F ‚àí 8.42C</div>
        </div>
      </div>

      <div class="formula-chip">
        FI = <span>W</span> ‚àí 12.03<span>F</span> ‚àí 8.42<span>C</span>
      </div>

      <!-- W -->
      <div class="input-group">
        <div class="input-label">
          <span class="name" data-tip="Total egg weight in grams">W ‚Äî Total Weight</span>
          <span class="unit">grams (g)</span>
        </div>
        <div class="slider-row">
          <input type="range" id="fi-w" min="40" max="80" step="0.1" value="60"/>
          <input type="number" class="number-input" id="fi-w-num" min="40" max="80" step="0.1" value="60"/>
        </div>
      </div>

      <!-- F -->
      <div class="input-group">
        <div class="input-label">
          <span class="name" data-tip="Salt floatation score of the egg (0 = sinks, higher = floats more)">F ‚Äî Floatation Score</span>
          <span class="unit">score</span>
        </div>
        <div class="slider-row">
          <input type="range" id="fi-f" min="0" max="5" step="0.1" value="2"/>
          <input type="number" class="number-input" id="fi-f-num" min="0" max="5" step="0.1" value="2"/>
        </div>
      </div>

      <!-- C -->
      <div class="input-group">
        <div class="input-label">
          <span class="name" data-tip="Candling score based on visual light transmission through the egg shell (0 = clear, higher = denser/older)">C ‚Äî Candling Score</span>
          <span class="unit">score</span>
        </div>
        <div class="slider-row">
          <input type="range" id="fi-c" min="0" max="5" step="0.1" value="2"/>
          <input type="number" class="number-input" id="fi-c-num" min="0" max="5" step="0.1" value="2"/>
        </div>
      </div>

      <!-- Result -->
      <div class="result-box" id="fi-result-box">
        <div class="result-label">Freshness Index (FI)</div>
        <div class="result-value" id="fi-value">‚Äî</div>
        <div class="freshness-bar"><div class="freshness-fill" id="fi-bar"></div></div>
        <div class="result-grade" id="fi-grade"></div>
        <div class="result-note" id="fi-note"></div>
      </div>
    </div>

    <!-- Haugh Unit Card -->
    <div class="card anim" id="hu-card">
      <div class="card-header">
        <div class="card-icon haugh">üìê</div>
        <div>
          <div class="card-title">Haugh Unit</div>
          <div class="card-subtitle">HU = 100¬∑log(H ‚àí 1.7W‚Å∞¬∑¬≥‚Å∑ + 7.57)</div>
        </div>
      </div>

      <div class="formula-chip" style="background:#e8e8e8;color:#111111;border:1.5px solid #d0d0d0;">
        HU = 100¬∑log(<span>H</span> ‚àí 1.7<span>W</span><sup style="font-size:.6em">0.37</sup> + 7.57)
      </div>

      <!-- H -->
      <div class="input-group">
        <div class="input-label">
          <span class="name" data-tip="Height of the thick albumen in mm, measured with a tripod micrometer">H ‚Äî Albumen Height</span>
          <span class="unit">mm</span>
        </div>
        <div class="slider-row">
          <input type="range" class="haugh-slider" id="hu-h" min="1" max="15" step="0.1" value="7"/>
          <input type="number" class="number-input haugh-field" id="hu-h-num" min="1" max="15" step="0.1" value="7"/>
        </div>
      </div>

      <!-- W -->
      <div class="input-group">
        <div class="input-label">
          <span class="name" data-tip="Total egg weight in grams">W ‚Äî Egg Weight</span>
          <span class="unit">grams (g)</span>
        </div>
        <div class="slider-row">
          <input type="range" class="haugh-slider" id="hu-w" min="40" max="80" step="0.1" value="60"/>
          <input type="number" class="number-input haugh-field" id="hu-w-num" min="40" max="80" step="0.1" value="60"/>
        </div>
      </div>

      <!-- Spacer to align result boxes -->
      <div style="height:78px;display:flex;align-items:center;justify-content:center;">
        <div style="text-align:center;opacity:.3;font-size:.78rem;font-family:'DM Mono',monospace;">
          ‚Äî HU requires 2 inputs only ‚Äî
        </div>
      </div>

      <!-- Result -->
      <div class="result-box" id="hu-result-box">
        <div class="result-label">Haugh Unit (HU)</div>
        <div class="result-value" id="hu-value">‚Äî</div>
        <div class="freshness-bar"><div class="freshness-fill" id="hu-bar"></div></div>
        <div class="result-grade" id="hu-grade"></div>
        <div class="result-note" id="hu-note"></div>
      </div>
    </div>
  </div>


  <!-- Comparison Panel -->
  <div class="compare-panel anim">
    <div class="compare-title">Side-by-Side Comparison</div>
    <div class="compare-sub">Both methods analysed ‚Äî do they agree?</div>

    <div class="compare-grid">
      <div class="compare-col">
        <div class="clabel">Freshness Index</div>
        <div class="cval" id="c-fi-val" style="color:var(--yolk)">‚Äî</div>
        <div class="cgrade grade-na" id="c-fi-grade">Enter values</div>
      </div>
      <div class="compare-vs">vs</div>
      <div class="compare-col">
        <div class="clabel">Haugh Unit</div>
        <div class="cval" id="c-hu-val" style="color:#9b7aff">‚Äî</div>
        <div class="cgrade grade-na" id="c-hu-grade">Enter values</div>
      </div>
    </div>

    <div class="delta-bar-wrap">
      <div class="delta-label">
        <span>FI (normalised)</span>
        <span id="delta-pct">‚Äî</span>
        <span>HU (normalised)</span>
      </div>
      <div class="delta-track"><div class="delta-fill" id="delta-fill" style="width:0%"></div></div>
    </div>

    <div class="match-banner pending" id="match-banner">
      ‚üµ Fill in both calculators to see agreement
    </div>
  </div>

  <!-- Info Tiles -->
  <div class="info-strip anim">
    <div class="info-tile">
      <div class="it-icon">üå°Ô∏è</div>
      <div class="it-val" id="tile-fi">‚Äî</div>
      <div class="it-name">FI Score</div>
    </div>
    <div class="info-tile">
      <div class="it-icon">üìä</div>
      <div class="it-val" id="tile-hu">‚Äî</div>
      <div class="it-name">Haugh Units</div>
    </div>
    <div class="info-tile">
      <div class="it-icon">‚úÖ</div>
      <div class="it-val" id="tile-agree">‚Äî</div>
      <div class="it-name">Methods Agree</div>
    </div>
  </div>

</div>

<footer>
  <p>Based on USDA &amp; Haugh (1937) egg quality standards ¬∑ For research &amp; educational use</p>
</footer>

<script>
// ‚îÄ‚îÄ STATE ‚îÄ‚îÄ
const state = {
  fi: { w: 60, f: 2, c: 2 },
  hu: { h: 7,  w: 60 }
};

// ‚îÄ‚îÄ CLASSIFY HELPERS ‚îÄ‚îÄ
function classifyFI(fi) {
  if (fi >= 51.82)             return { cls:'fresh', label:'Grade AA ‚Äî Excellent',  note:'Excellent quality. High floatation and candling scores confirm very fresh egg. Ideal for poaching, frying, or any use.' };
  if (fi >= 30.019 && fi < 51.82) return { cls:'mid',   label:'Grade A ‚Äî Good Quality', note:'Good quality. Egg shows acceptable freshness levels. Suitable for most culinary uses.' };
  return                         { cls:'old',   label:'Grade B ‚Äî Acceptable',   note:'Acceptable quality. Noticeable deterioration detected. Best used for baking or scrambling.' };
}

function classifyHU(hu) {
  if (hu >= 72)       return { cls:'fresh', label:'Grade AA ‚Äî Excellent', note:'High Haugh Unit. Thick, firm albumen. Premium quality egg.' };
  if (hu >= 60)       return { cls:'fresh', label:'Grade A ‚Äî Very Good',  note:'Grade A quality. Good albumen integrity. Suitable for any use.' };
  if (hu >= 31)       return { cls:'mid',   label:'Grade B ‚Äî Acceptable', note:'Grade B. Some deterioration. Suitable for processed products.' };
  return               { cls:'old',   label:'Grade C ‚Äî Poor',       note:'Low HU. Significant quality loss. Limited culinary use.' };
}

// Normalize FI to 0‚Äì100 scale (range ~10‚Äì120 practical)
function normFI(fi) { return Math.max(0, Math.min(100, (fi / 80) * 100)); }
// Normalize HU to 0‚Äì100 scale (range 0‚Äì110 practical)
function normHU(hu) { return Math.max(0, Math.min(100, (hu / 110) * 100)); }

// ‚îÄ‚îÄ FRESHNESS BAR COLOR ‚îÄ‚îÄ
function barColor(cls) {
  return cls === 'fresh' ? 'linear-gradient(90deg,#4BAF7A,#8be0b0)' :
         cls === 'mid'   ? 'linear-gradient(90deg,#E8A020,#f0d060)' :
                           'linear-gradient(90deg,#C94040,#f07070)';
}

// ‚îÄ‚îÄ CALCULATE FI ‚îÄ‚îÄ
function calcFI() {
  const { w, f, c } = state.fi;
  return w - 12.03 * f - 8.42 * c;
}

// ‚îÄ‚îÄ CALCULATE HU ‚îÄ‚îÄ
function calcHU() {
  const { h, w } = state.hu;
  const inner = h - 1.7 * Math.pow(w, 0.37) + 7.57;
  if (inner <= 0) return 0;
  return 100 * Math.log10(inner);
}

// ‚îÄ‚îÄ RENDER FI ‚îÄ‚îÄ
function renderFI() {
  const fi = calcFI();
  const { cls, label, note } = classifyFI(fi);
  const norm = normFI(fi);

  document.getElementById('fi-value').textContent = fi.toFixed(2);
  const box = document.getElementById('fi-result-box');
  box.className = `result-box ${cls}`;

  const fill = document.getElementById('fi-bar');
  fill.style.width = norm + '%';
  fill.style.background = barColor(cls);

  document.getElementById('fi-grade').innerHTML = `<span class="grade-dot"></span> ${label}`;
  document.getElementById('fi-note').textContent = note;

  document.getElementById('tile-fi').textContent = fi.toFixed(1);
  return { fi, norm, cls, label };
}

// ‚îÄ‚îÄ RENDER HU ‚îÄ‚îÄ
function renderHU() {
  const hu = calcHU();
  const { cls, label, note } = classifyHU(hu);
  const norm = normHU(hu);

  document.getElementById('hu-value').textContent = hu.toFixed(2);
  const box = document.getElementById('hu-result-box');
  box.className = `result-box ${cls}`;

  const fill = document.getElementById('hu-bar');
  fill.style.width = norm + '%';
  fill.style.background = barColor(cls);

  document.getElementById('hu-grade').innerHTML = `<span class="grade-dot"></span> ${label}`;
  document.getElementById('hu-note').textContent = note;

  document.getElementById('tile-hu').textContent = hu.toFixed(1);
  return { hu, norm, cls, label };
}

// ‚îÄ‚îÄ RENDER COMPARISON ‚îÄ‚îÄ
function renderCompare(fiData, huData) {
  const { fi, norm: fiNorm, cls: fiCls, label: fiLabel } = fiData;
  const { hu, norm: huNorm, cls: huCls, label: huLabel } = huData;

  document.getElementById('c-fi-val').textContent = fi.toFixed(1);
  document.getElementById('c-hu-val').textContent = hu.toFixed(1);

  const gradeMap = { fresh:'grade-fresh', mid:'grade-mid', old:'grade-old' };
  const cfiG = document.getElementById('c-fi-grade');
  const chuG = document.getElementById('c-hu-grade');
  cfiG.className = `cgrade ${gradeMap[fiCls]}`;
  cfiG.textContent = fiLabel.split('‚Äî')[0].trim();
  chuG.className = `cgrade ${gradeMap[huCls]}`;
  chuG.textContent = huLabel.split('‚Äî')[0].trim();

  // Delta bar fill = average normalised value
  const avg = (fiNorm + huNorm) / 2;
  document.getElementById('delta-fill').style.width = avg + '%';
  document.getElementById('delta-pct').textContent = `Œî ${Math.abs(fiNorm - huNorm).toFixed(1)}%`;

  // Agreement
  const banner = document.getElementById('match-banner');
  const agree = fiCls === huCls;
  const partial = (fiCls !== 'old' && huCls !== 'old') || (fiCls === 'old' && huCls === 'old');
  if (agree) {
    banner.className = 'match-banner agree';
    banner.textContent = `‚úì Both methods agree ‚Äî ${fiLabel.split('‚Äî')[1]?.trim() || fiCls}`;
    document.getElementById('tile-agree').textContent = 'Yes';
  } else {
    banner.className = 'match-banner disagree';
    banner.textContent = `‚ö† Methods diverge ‚Äî FI: ${fiCls.toUpperCase()} ¬∑ HU: ${huCls.toUpperCase()}`;
    document.getElementById('tile-agree').textContent = 'No';
  }
}

// ‚îÄ‚îÄ FULL UPDATE ‚îÄ‚îÄ
function update() {
  const fiData = renderFI();
  const huData = renderHU();
  renderCompare(fiData, huData);
}

// ‚îÄ‚îÄ SYNC SLIDER ‚Üî NUMBER INPUT ‚îÄ‚îÄ
function bindPair(sliderId, numId, stateObj, key, decimals = 1) {
  const slider = document.getElementById(sliderId);
  const num    = document.getElementById(numId);

  slider.addEventListener('input', () => {
    stateObj[key] = parseFloat(slider.value);
    num.value     = parseFloat(slider.value).toFixed(decimals);
    update();
  });
  num.addEventListener('input', () => {
    let v = parseFloat(num.value);
    if (isNaN(v)) return;
    v = Math.max(parseFloat(num.min), Math.min(parseFloat(num.max), v));
    stateObj[key] = v;
    slider.value  = v;
    update();
  });
}

bindPair('fi-w', 'fi-w-num', state.fi, 'w', 1);
bindPair('fi-f', 'fi-f-num', state.fi, 'f', 1);
bindPair('fi-c', 'fi-c-num', state.fi, 'c', 1);
bindPair('hu-h', 'hu-h-num', state.hu, 'h', 1);
bindPair('hu-w', 'hu-w-num', state.hu, 'w', 1);

// ‚îÄ‚îÄ INITIAL RENDER ‚îÄ‚îÄ
update();

// ‚îÄ‚îÄ EGG CRACK ON DOUBLE-CLICK (4 stages) ‚îÄ‚îÄ
(function() {
  const wrap = document.getElementById('eggWrap');
  const hint = document.getElementById('eggHint');
  const stages = ['crack-1','crack-2','crack-3','crack-4'];
  let level = 0;

  const hints = [
    'double-click to crack ü•ö',
    'keep going... üî®',
    'almost there! ‚ö°',
    'one more! üí™',
    'double-click to reset üç≥'
  ];

  wrap.addEventListener('dblclick', () => {
    // reset on 4th stage
    if (level >= 4) {
      stages.forEach(s => wrap.classList.remove(s));
      wrap.classList.remove('shaking','jolting');
      level = 0;
      hint.textContent = hints[0];
      return;
    }

    level++;
    stages.forEach(s => wrap.classList.remove(s));
    wrap.classList.remove('shaking','jolting');

    void wrap.offsetWidth; // force reflow for animation restart
    wrap.classList.add(stages[level - 1]);

    // shake on 1 & 2, jolt on 3, nothing (CSS handles it) on 4
    if (level <= 2) {
      wrap.classList.add('shaking');
      setTimeout(() => wrap.classList.remove('shaking'), 400);
    } else if (level === 3) {
      wrap.classList.add('jolting');
      setTimeout(() => wrap.classList.remove('jolting'), 340);
    }

    hint.textContent = hints[level];
  });
})();

</script>
</body>
</html>